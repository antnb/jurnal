---
layout: full_article
title: "OpenMP Performance in Numerical Simulation of Dambreak Problem Using Shallow Water Equations"
author: "Dr. Putu Harry Gunawan"
categories: lontar
canonical_url: https://jurnal.harianregional.com/lontar/full-55754 
citation_abstract_html_url: "https://jurnal.harianregional.com/lontar/id-55754"
citation_pdf_url: "https://jurnal.harianregional.com/lontar/full-55754"  
comments: true
---

<p><span class="font4" style="font-weight:bold;">LONTAR KOMPUTER VOL. 11, NO. 1 APRIL 2020</span></p>
<p><span class="font4" style="font-weight:bold;">DOI : 10.24843/LKJITI.2020.v11.i01.p01</span></p>
<p><span class="font4" style="font-weight:bold;">Accredited B by RISTEKDIKTI Decree No. 51/E/KPT/2017</span></p>
<p><span class="font4" style="font-weight:bold;">p-ISSN 2088-1541</span></p>
<p><span class="font4" style="font-weight:bold;">e-ISSN 2541-5832</span></p><a name="caption1"></a>
<h1><a name="bookmark0"></a><span class="font6" style="font-weight:bold;"><a name="bookmark1"></a>OpenMP Performance in Numerical Simulation of Dambreak Problem Using Shallow Water Equations</span></h1>
<p><span class="font4">P. H. Gunawan</span></p>
<p><span class="font4">School of Computing, Telkom University</span></p>
<p><span class="font4">Jl. Telekomunikasi No. 1, Terusan Buah Batu, Bandung 40257, Indonesia </span><a href="mailto:phgunawan@telkomuniversity.ac.id"><span class="font4">phgunawan@telkomuniversity.ac.id</span></a></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Abstract</span></p>
<p><span class="font4" style="font-style:italic;">Numerical simulation of water surface waves is widely used to describe water flow and its impact on human life. For instance, numerical simulation of waves is elaborated to simulate Tsunami as an early warning system. Using a numerical approach, the study of water flow will reduce costs and save time compared with the conventional approach (in the laboratory). Shallow water equations (SWE) is one of the mathematical models which can be used to describe water flow. In the numerical simulation of SWE, the finite volume method is a robust method to approximate SWE. The result of using a numerical approach depends on the number of grids. The high number of grids then the smooth solution can be obtained. However, an increasing number of grids lead to an increase in computational cost. In this paper, parallel computing using the OpenMP platform is given to reduce the computational cost of numerical simulation. In parallel computing performances, Speedup and Efficiency of numerical simulation using 6400 grids points are obtained four times and 51%, respectively. Moreover, by several numbers of cores from 2 to 8, the CPU time of parallel computing is shown decreasing along with the increasing number of computer cores.</span></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Keywords: </span><span class="font4" style="font-style:italic;">Parallel computing, OpenMP, Shallow water equation, Simulation, Numerical</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark2"></a><span class="font4" style="font-weight:bold;"><a name="bookmark3"></a>1. &nbsp;&nbsp;&nbsp;Introduction</span></h2></li></ul>
<p><span class="font4">Dynamical movement of surface waves can be modeled using the various models. The simple mathematical wave model to describe wave movement dynamically is known as Shallow water equations (SWE). This model is widely used in describing fluid flow problem, such as flow in canal, river, lakes, etc. or it can be used to simulate Tsunami phenomena as an early warning system (see [1, 2, 3] for more detail). Model SWE is a system of hyperbolic equations which consists of two equations (mass and momentum conservation). In one dimension space, SWE is given as follows.</span></p>
<p><span class="font10" style="font-style:italic;">∂h &nbsp;&nbsp;∂</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">hu</span><span class="font3" style="font-style:italic;">)</span></p>
<div>
<p><span class="font4">(1)</span></p>
<p><span class="font4">(2)</span></p>
</div><br clear="all">
<p><span class="font10" style="font-style:italic;">∂t ∂x </span><span class="font2" style="font-style:italic;"><sup>,</sup></span></p>
<p><span class="font10" style="font-style:italic;">∂</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">hu</span><span class="font3" style="font-style:italic;">) &nbsp;&nbsp;</span><span class="font10" style="font-style:italic;">∂ </span><span class="font4" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">hu</span><span class="font1" style="font-style:italic;"><sup>2</sup></span><span class="font10"> + </span><span class="font9">2</span><span class="font10" style="font-style:italic;">gh<sup>2</sup>)</span></p>
<p><span class="font10" style="font-style:italic;">∂t &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∂x</span></p>
<p><span class="font4">where </span><span class="font10" style="font-style:italic;">h</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,t</span><span class="font3" style="font-style:italic;">)</span><span class="font4"> describes water height, </span><span class="font10" style="font-style:italic;">u</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,t</span><span class="font3" style="font-style:italic;">)</span><span class="font4"> describes average velocity, </span><span class="font10" style="font-style:italic;">g</span><span class="font4"> shows gravitational coefficient, moreover </span><span class="font10" style="font-style:italic;">x</span><span class="font4"> and </span><span class="font10" style="font-style:italic;">t</span><span class="font4"> are space and time, respectively.</span></p>
<p><span class="font4">To solve (1 - 2) numerically, one robust method can be used, which is called the finite volume method (FVM) [4, 5, 6]. FVM is widely used to approximate the hyperbolic type of equations</span></p>
<p><span class="font4">in the numerical problem. Generally, there are two types of approach in FVM, staggered grid and collocated grid model. The detail of these two numerical models can be found in some references [1, 6, 7, 8]. As shown in [6] and [8], FVM collocated and staggered grid model are satisfying mathematical properties of shallow water equations, i.e., preserve positivity of water height, satisfy the well-balanced condition, etc.</span></p>
<p><span class="font4">Mathematically, a good approximation result depends on the size of space steps or grids. This size is obtained by dividing the domain space into several discrete spaces[9]. Indeed, increasing the number of grids causes high computational cost for approximating (1 - 2). In numerical scheme of (1 - 2), two equations (mass and momentum) will be approximated. Therefore, the process of approximating two equations needs long time execution using a large number of grids.</span></p>
<p><span class="font4">Here, computational cost can be minimized by applying computer science techniques which is called parallel computing. In this case, computation tasks are optimized using several cores in a single computer. Several references, as in [9, 10, 11, 12] and [13], show the ability of parallel computing for tackling computational cost in the numerical approach. In this paper, the goal of this paper is to implement multi-cores parallel computing in a collocation scheme for SWE. Moreover, the numerical simulation of the dry-wet dam-break problem will be elaborated to investigate the performance of parallel computing.</span></p>
<p><span class="font4">In order to complete this paper, in Section 2 a brief introduction of FVM collocated scheme with HLLC flux for SWE. In Section 3, the parallel algorithm of numerical scheme is given. The numerical results and parallel performances are provided in Section 4. The conclusion of this paper is shown in Section 5.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark4"></a><span class="font4" style="font-weight:bold;"><a name="bookmark5"></a>2. &nbsp;&nbsp;&nbsp;Numerical Scheme</span></h2></li></ul>
<p><span class="font4">For simplicity, SWE (1 - 2) can be rewritten in the following compact form,</span></p>
<p><a href="#bookmark6"><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;">t</span><span class="font10"> + </span><span class="font10" style="font-style:italic;">F </span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">U</span><span class="font10"> )</span><span class="font1">x </span><span class="font10">= 0</span></a></p>
<p><span class="font4">where</span></p>
<p><a href="#bookmark7"><span class="font10" style="font-style:italic;">U </span><span class="font3" style="font-style:italic;">= (</span><span class="font10" style="font-style:italic;">h,hu)<sup>τ</sup></span><span class="font10">,</span></a></p>
<p><a href="#bookmark8"><span class="font10" style="font-style:italic;">F</span><span class="font10"> (U )= </span><span class="font10" style="font-style:italic;">(hu,hu</span><span class="font1" style="font-style:italic;"><sup>2</sup></span><span class="font10"> + </span><span class="font12">∣</span><span class="font10"> </span><span class="font10" style="font-style:italic;">ghA .</span><span class="font4">(5)</span></a></p>
<p><span class="font4">In FVM, the spatial and time domain is discretized into several control volumes. For instance, in Figure 1 a control volume </span><span class="font10">V</span><span class="font1"><sub>k</sub> </span><span class="font4">is given at point </span><span class="font10" style="font-style:italic;">k</span><span class="font4" style="font-style:italic;">.</span><span class="font4"> This control volume is defined on </span><span class="font10">(χ</span><span class="font1"><sub>k-</sub></span><span class="font9">1</span><span class="font1">∕</span><span class="font9">2</span><span class="font10">,χ</span><span class="font1"><sub>k</sub></span><span class="font9">+1</span><span class="font1">∕</span><span class="font9">2</span><span class="font10">)</span><span class="font3">× </span><span class="font10">(t</span><span class="font1"><sup>n</sup></span><span class="font10">,t</span><span class="font1"><sup>n+1</sup></span><span class="font10">)</span><span class="font4">. Consider computational domain of simulation is </span><span class="font10">Ω = [0,L] </span><span class="font3">× </span><span class="font10">[0,T]</span><span class="font4">, then the following discrete properties can be defined as,</span></p>
<ul style="list-style:none;"><li>
<p><span class="font3">•</span><span class="font4"> &nbsp;&nbsp;&nbsp;point </span><span class="font10" style="font-style:italic;">x</span><span class="font9" style="font-style:italic;"><sub>k</sub></span><span class="font10"> = </span><span class="font10" style="font-style:italic;">k ×</span><span class="font10"> ∆x </span><span class="font4">with the space step </span><span class="font10">∆x = </span><span class="font10" style="font-style:italic;">L/N</span><span class="font9" style="font-style:italic;">x</span><span class="font4"> and </span><span class="font10" style="font-style:italic;">k </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;"> M</span><span class="font10"> = </span><span class="font3">{</span><span class="font10">0,1 </span><span class="font3">∙ ∙ ∙ </span><span class="font10">, N</span><span class="font1"><sub>x</sub></span><span class="font3">}</span><span class="font4">,</span></p></li>
<li>
<p><span class="font3">•</span><span class="font4"> &nbsp;&nbsp;&nbsp;point </span><span class="font10" style="font-style:italic;">t</span><span class="font9" style="font-style:italic;">n</span><span class="font10"> = </span><span class="font10" style="font-style:italic;">n × </span><span class="font3" style="font-style:italic;">∆</span><span class="font10" style="font-style:italic;">t</span><span class="font4"> with </span><span class="font3" style="font-style:italic;">∆</span><span class="font10" style="font-style:italic;">t</span><span class="font10"> = </span><span class="font10" style="font-style:italic;">T/N</span><span class="font9" style="font-style:italic;">t</span><span class="font4"> and </span><span class="font10" style="font-style:italic;">n </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;">T</span><span class="font10"> = </span><span class="font3">{</span><span class="font10">0,1, </span><span class="font3">∙ ∙ ∙ }</span><span class="font4">,</span></p></li></ul>
<p><span class="font4">where </span><span class="font10" style="font-style:italic;">N</span><span class="font1">x </span><span class="font4">and </span><span class="font10" style="font-style:italic;">N</span><span class="font1">t </span><span class="font4">are the number of discrete points of spatial and time, respectively.</span></p>
<p><span class="font4">Let’s </span><span class="font10" style="font-style:italic;">U</span><span class="font1"><sub>k</sub><sup>n</sup></span><span class="font10" style="font-style:italic;">, k</span><span class="font3"> </span><span class="font8">∈</span><span class="font3"> Z</span><span class="font10" style="font-style:italic;">, n</span><span class="font3"> </span><span class="font8">∈</span><span class="font3"> N </span><span class="font4">be a discrete value of solution SWE (3), then it can written as</span></p>
<p><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;">n </span><span class="font3" style="font-style:italic;">^</span><span class="font10" style="font-style:italic;">≈ ( U </span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,t<sup>n</sup>'</span><span class="font3" style="font-style:italic;">)</span><span class="font10"> dx, </span><span class="font8" style="font-style:italic;">∀</span><span class="font10" style="font-style:italic;">k </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;">M,n </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;">T</span><span class="font10">.</span></p>
<div>
<p><span class="font4">(6)</span></p>
</div><br clear="all">
<p><span class="font1">V</span><span class="font0">k</span></p>
<p><span class="font4">Therefore in FVM collocated scheme, the discretization of SWE is given as</span></p>
<div>
<p><span class="font11" style="font-style:italic;">TA-Ut</span></p>
</div><br clear="all">
<div>
<p><span class="font10">∆</span><span class="font10" style="font-style:italic;">t</span></p>
</div><br clear="all">
<div>
<p><span class="font10">+</span></p>
</div><br clear="all">
<div>
<p><span class="font9" style="font-style:italic;">n</span></p>
<p><span class="font10" style="font-style:italic;">F</span><span class="font9" style="font-style:italic;">k+</span><span class="font13"> 2</span></p>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
<p><span class="font2" style="font-style:italic;"><sub>F</sub></span><span class="font9" style="font-style:italic;"><sub>k</sub>n</span><span class="font1"><sub>-</sub></span></p>
</div><br clear="all">
<div>
<p><span class="font10">∆</span><span class="font10" style="font-style:italic;">x</span></p>
</div><br clear="all">
<div>
<p><span class="font10">= 0</span><span class="font10" style="font-style:italic;">,</span></p>
</div><br clear="all">
<div>
<p><span class="font8">∀</span><span class="font10" style="font-style:italic;">k</span><span class="font3"> </span><span class="font8">∈</span><span class="font3"> M</span><span class="font10" style="font-style:italic;">, n</span><span class="font3"> </span><span class="font8">∈</span><span class="font3"> T</span></p>
</div><br clear="all">
<div>
<p><span class="font4">(7)</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/55754-1.jpg" alt="" style="width:193pt;height:167pt;">
<p><span class="font4" style="font-weight:bold;">Figure 1. </span><span class="font4">The visualization of control volume in FVM.</span></p>
</div><br clear="all">
<p><span class="font4">where flux </span><span class="font10">F</span><span class="font1"><sub>i±</sub></span><span class="font13" style="text-decoration:underline;">1</span><span class="font13"> </span><span class="font4">will be approximated using the numerical flux which called HLLE (Harten, Lax, van Leer and Einfeld) and given as</span></p>
<p><a href="#bookmark9"><span class="font1">n &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nn &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nn</span></a></p>
<p><a href="#bookmark10"><span class="font10" style="font-style:italic;">F</span><span class="font9" style="font-style:italic;">k+</span><span class="font2"> <sup>1</sup> </span><span class="font10">— </span><span class="font10" style="font-style:italic;">F</span><span class="font2" style="font-style:italic;"><sup>(U</sup></span><span class="font9" style="font-style:italic;">k</span><span class="font10"> <sup>,</sup> </span><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;">k+1</span><span class="font3" style="font-style:italic;">)</span><span class="font3"> <sup>— </sup></span><span class="font2" style="font-style:italic;"><sup>a</sup></span><span class="font9" style="font-style:italic;">1</span><span class="font10" style="font-style:italic;">F </span><span class="font9" style="font-style:italic;">Ψk+1</span><span class="font3" style="font-style:italic;">)</span><span class="font3"> <sup>+ </sup></span><span class="font2" style="font-style:italic;"><sup>a</sup></span><span class="font9" style="font-style:italic;">2</span><span class="font10" style="font-style:italic;">F </span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;">k</span><span class="font10"> ) </span><span class="font4"><sup>- </sup></span><span class="font10"><sup>α</sup></span><span class="font9">3</span><span class="font10">(U</span><span class="font1">k </span><span class="font9">+ 1 </span><span class="font4"><sup>-</sup> </span><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;">k</span><span class="font10"> )<sup>,</sup></span></a></p>
<p><span class="font4">where </span><span class="font10" style="font-style:italic;">F</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">U</span><span class="font9" style="font-style:italic;"><sub>k</sub></span><span class="font3" style="font-style:italic;">)</span><span class="font4"> is numerical flux function (5). Meanwhile, coefficients </span><span class="font10">α</span><span class="font1"><sub>1</sub> </span><span class="font4">and </span><span class="font10">α</span><span class="font1"><sub>2</sub> </span><span class="font4">are given as follows,</span></p>
<p><span class="font10">min(λ</span><span class="font9">2</span><span class="font10">,0) </span><span class="font3">- </span><span class="font10">min(λ</span><span class="font9">ι</span><span class="font10">, 0) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;λ</span><span class="font9">2</span><span class="font8">∣</span><span class="font10">λ</span><span class="font9">1</span><span class="font3">1- </span><span class="font10">λ</span><span class="font9">1</span><span class="font8">∣</span><span class="font10">λ</span><span class="font9">2</span><span class="font8">∣</span></p>
<p><a href="#bookmark11"><span class="font10">a</span><span class="font9">l <sup>—</sup> --------7----7--------- <sup>α</sup>2 <sup>—</sup> 1 </span><span class="font4"><sup>-</sup> </span><span class="font10">a</span><span class="font9">l </span><span class="font2" style="font-style:italic;"><sup>a</sup></span><span class="font9" style="font-style:italic;">3</span><span class="font9"> <sup>—</sup> —7777</span></a></p>
<p><span class="font10">λ</span><span class="font9">2 </span><span class="font3">— </span><span class="font10">λ</span><span class="font9">ι &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font10">2(λ</span><span class="font9">2 </span><span class="font3">— </span><span class="font10">λ</span><span class="font9">ι</span><span class="font10">)</span></p>
<p><span class="font4">The coefficients </span><span class="font10">λ</span><span class="font9">1 </span><span class="font4">and </span><span class="font10">λ</span><span class="font9">2 </span><span class="font4">can be obtained in some references, for instance, see [4, 14, 15]. Thus the discretization (7) can be rewritten as</span></p>
<p><span class="font9" style="font-style:italic;">n</span><span class="font9">+1 </span><span class="font9" style="font-style:italic;">n</span><span class="font10"> t </span><span class="font9" style="font-style:italic;">n n &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n n</span></p>
<p><span class="font2" style="font-style:italic;"><sup>U</sup></span><span class="font9" style="font-style:italic;">k</span><span class="font3"> &nbsp;&nbsp;<sup>— </sup></span><span class="font2" style="font-style:italic;"><sup>u</sup></span><span class="font9" style="font-style:italic;">k</span><span class="font4"> <sup>-</sup> </span><span class="font10" style="text-decoration:underline;">∆X</span><span class="font10"> (<sup>F</sup></span><span class="font3"><sup>(</sup></span><span class="font10"><sup>U</sup></span><span class="font1">k </span><span class="font2" style="font-style:italic;"><sup>,u</sup></span><span class="font9" style="font-style:italic;">k+ι</span><span class="font3" style="font-style:italic;">)</span><span class="font4"> <sup>-</sup> </span><span class="font10" style="font-style:italic;">F</span><span class="font3" style="font-style:italic;">(</span><span class="font2" style="font-style:italic;"><sup>u</sup></span><span class="font9" style="font-style:italic;">k</span><span class="font1" style="font-style:italic;">-</span><span class="font9" style="font-style:italic;">ι</span><span class="font2" style="font-style:italic;"><sup>,u</sup></span><span class="font9" style="font-style:italic;">k ∏</span><span class="font10"> <sup>,</sup> </span><span class="font8" style="font-style:italic;">∀</span><span class="font2" style="font-style:italic;"><sup>k</sup> </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;">M</span><span class="font2" style="font-style:italic;"><sup>,n</sup> </span><span class="font8" style="font-style:italic;">∈</span><span class="font10" style="font-style:italic;">T</span><span class="font5"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sup>(10)</sup></span></p>
<p><span class="font4">Note that numerical form (10) is under stability condition, which is given by the following condition</span></p>
<p><span class="font10">∆t </span><span class="font10" style="font-style:italic;">≤ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font3" style="font-style:italic;">∆</span><span class="font10" style="font-style:italic;">x</span></p>
<div>
<p><span class="font4">(11)</span></p>
</div><br clear="all">
<p><span class="font2" style="font-style:italic;"><sup>ν</sup></span><span class="font10"> max (</span><span class="font8">∣</span><span class="font10">u</span><span class="font1"><sub>k</sub> </span><span class="font3">| </span><span class="font10">+ γ/</span><span class="font10" style="font-style:italic;">gh<sub>k</sub> ) </span><span class="font9" style="font-style:italic;">k</span></p>
<p><span class="font4">with </span><span class="font10">0 </span><span class="font10" style="font-style:italic;">&lt;ν</span><span class="font3"> ≤ </span><span class="font10">1 </span><span class="font4">is called Courant number.</span></p>
<ul style="list-style:none;"><li>
<p><span class="font4" style="font-weight:bold;">3. &nbsp;&nbsp;&nbsp;Parallel Architecture</span></p></li></ul>
<p><span class="font4">Parallel computing can is a computational procedure that is to compute several tasks of computation simultaneously. This type of computing can be done by a single computer with multi-cores or multiple computers. One popular platform in multi-cores parallel computing is called OpenMP (Open Multi-Processing). This platform is a shared memory multiprocessing programming type and can be used in several programming languages like C/C++, Fortran, etc.</span></p>
<p><span class="font4">For example, in [9], parallel computing using the OpenMP platform is shown success to reduce computational time for solving the 1D heat equation. Moreover, OpenMP is shown as simple and straightforward in application. The performance of OpenMP depends on the specification of the computer. In this paper, two measurements of parallel performance metrics will be elaborated.</span></p>
<p><span class="font4">Here speedup and efficiency metrics will be given. The speedup can be obtained by</span></p>
<p><span class="font10">S(p) — </span><span class="font10" style="font-style:italic;">T</span><span class="font9" style="font-style:italic;">l</span><span class="font10">, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font4">(12)</span></p>
<p><span class="font10" style="font-style:italic;">T</span><span class="font9" style="font-style:italic;">p</span></p>
<p><span class="font4">Where </span><span class="font10">T</span><span class="font9">1 </span><span class="font4">and </span><span class="font10">T</span><span class="font1">p </span><span class="font4">are CPU time for serial and parallel, respectively. Where </span><span class="font10">p </span><span class="font4">describes the number of cores that are used for computing. Meanwhile, the efficiency of parallel computing can be computed as</span></p>
<p><span class="font10" style="font-style:italic;">E</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">p</span><span class="font3" style="font-style:italic;">) = </span><span class="font10" style="font-style:italic;">S</span><span class="font3" style="font-style:italic;">(</span><span class="font2" style="font-style:italic;"><sup>p</sup></span><span class="font3" style="font-style:italic;">)</span><span class="font3"> × </span><span class="font10">100%. </span><span class="font4">(13) </span><span class="font10"><sup>p</sup></span></p>
<p><span class="font4">In this paper, the numerical method (7) will be computed in parallel computing. Therefore the numerical algorithm is given for simplicity. A numerical algorithm for computing (7) in parallel can be seen in Figure 2.</span></p><img src="https://jurnal.harianregional.com/media/55754-2.png" alt="" style="width:268pt;height:420pt;">
<p><span class="font14">END</span></p>
<p><span class="font4" style="font-weight:bold;">Figure 2. </span><span class="font4">A numerical algorithm for solving (7) in parallel.</span></p>
<p><span class="font4">Here, the numerical algorithm in parallel is given in two areas, in serial and parallel computing. As shown in Figure 2, serial computing can be done in the initialization process of </span><span class="font10">U</span><span class="font1"><sub>k</sub><sup>0</sup> </span><span class="font4">and in defining CFL condition. Since these two processes are not fit in parallel computing. Meanwhile, parallel computing with OpenMP can be started in the inner loop stage, which is to compute (7) by defining the water height and velocity variable. Note that, the numerical algorithm in serial is similar to the Figure 2, where OpenMP is not applied in the parallel area.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark12"></a><span class="font4" style="font-weight:bold;"><a name="bookmark13"></a>4. &nbsp;&nbsp;&nbsp;Numerical Results and Parallel performances</span></h2></li></ul>
<p><span class="font4">To obtain results of numerical simulation and parallel implementation, the following specification of the computer is given in Table 1.</span></p>
<p><span class="font4" style="font-weight:bold;">Table 1. </span><span class="font4">The computer specifications for numerical simulation and parallel implementation</span></p>
<table border="1">
<tr><td style="vertical-align:top;">
<p><span class="font4">Name</span></p></td><td style="vertical-align:top;">
<p><span class="font4">Type</span></p></td></tr>
<tr><td style="vertical-align:top;">
<p><span class="font4">Operating System Processors</span></p>
<p><span class="font4">RAM</span></p></td><td style="vertical-align:top;">
<p><span class="font4">Centos 6.5</span></p>
<p><span class="font4">AMD 2 socket @4 cores</span></p>
<p><span class="font4">8 GB</span></p></td></tr>
</table>
<ul style="list-style:none;"><li>
<h2><a name="bookmark14"></a><span class="font4" style="font-weight:bold;"><a name="bookmark15"></a>4.1. &nbsp;&nbsp;&nbsp;Numerical Simulation of Dry and Wet Dambreak</span></h2></li></ul>
<p><span class="font4">Dambreak problem is very popular in numerical simulation of SWE. This problem produces shock phenomena, which is a big challenge for the numerical scheme to tackle discontinuity solution [14]. Here two problems are given in dry-wet bed of dambreak. The following initial configuration of dambreak in dry bed problem in the spatial domain </span><span class="font10">[0,1] </span><span class="font4">is given as follows</span></p>
<p><a href="#bookmark16"><span class="font10" style="font-style:italic;">h</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,</span><span class="font10"> 0) = lθ, </span><span class="font4">iftX </span><span class="font3">≥ <sup>0</sup></span><span class="font10"><sup>.</sup></span><span class="font3"><sup>5</sup> &nbsp;&nbsp;&nbsp;</span><span class="font10">,</span></a></p>
<ul style="list-style:none;"><li>
<p><span class="font10">1,</span><span class="font4"> &nbsp;&nbsp;&nbsp;otherwise</span></p></li></ul>
<p><a href="#bookmark17"><span class="font10">h(x, </span><span class="font3" style="font-style:italic;">0)</span><span class="font10" style="font-style:italic;">u</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,</span><span class="font10"> 0) = 0.</span></a></p>
<p><span class="font4">Meanwhile, for wet dambreak problem is shown as</span></p>
<p><a href="#bookmark18"><span class="font10" style="font-style:italic;">h</span><span class="font3" style="font-style:italic;">(</span><span class="font10" style="font-style:italic;">x,</span><span class="font10"> 0) = </span><span class="font7">(</span><span class="font10">0<sup>.</sup>2, </span><span class="font4">if </span><span class="font10">x </span><span class="font3">≥ <sup>0</sup></span><span class="font10"><sup>.</sup></span><span class="font3"><sup>5</sup> </span><span class="font10">,</span></a></p>
<ul style="list-style:none;"><li>
<p><span class="font10">1,</span><span class="font4"> &nbsp;&nbsp;&nbsp;otherwise</span></p></li></ul>
<p><a href="#bookmark19"><span class="font10">h(x, 0)u(x, 0) = 0.</span></a></p>
<p><span class="font4">The difference between dry and wet bed simulation is located on the right side of the dam wall (in this case at </span><span class="font10">x = 0.5</span><span class="font4">). Numerical results of dambreak simulation with </span><span class="font10">h </span><span class="font4">and </span><span class="font10" style="font-style:italic;">u</span><span class="font4"> profile are shown in Figure 3.</span></p>
<div><img src="https://jurnal.harianregional.com/media/55754-3.jpg" alt="" style="width:162pt;height:146pt;">
<p><span class="font4" style="font-weight:bold;">Figure 3. </span><span class="font4">Numerical simulation of dry and wet bed at simulation time </span><span class="font10" style="font-style:italic;">T</span><span class="font10"> = 0.1 </span><span class="font4">s.</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/55754-4.jpg" alt="" style="width:150pt;height:149pt;">
</div><br clear="all">
<p><span class="font4">As can be shown in Figure 3, the results of numerical simulation of the dry-wet bed are well elaborated. These results are similar to the analytical solution of dry-bed dam-break simulation by SWASHES software, which can be found in [16]. Here in Figure 3 (left), the water height profile for the wet-bed produces shock near </span><span class="font10">x = 0.8 </span><span class="font4">due to different energy of different water height. This phenomenon is satisfying Rankine-Hugoniot relation in mathematical observation [14].</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark20"></a><span class="font4" style="font-weight:bold;"><a name="bookmark21"></a>4.2. Parallel Implementation</span></h2></li></ul>
<p><span class="font4">In this section, the performance of OpenMP for simulating dambreak problems is given. First, the comparison of CPU time for both numerical simulations (wet and dry dam-break) can be seen in Figure 4. Moreover, serial and parallel of CPU time are shown for both problems. Here, several numbers of grid size are elaborated to see OpenMP performance, in this case </span><span class="font10" style="font-style:italic;">N</span><span class="font9" style="font-style:italic;">x</span><span class="font3"> </span><span class="font8">∈</span><span class="font3"> {</span><span class="font10">200,400,800,1600, 3200,64000</span><span class="font3">}</span><span class="font4">.</span></p>
<div><img src="https://jurnal.harianregional.com/media/55754-5.jpg" alt="" style="width:196pt;height:149pt;">
<p><span class="font4" style="font-weight:bold;">Figure 4. </span><span class="font4">Performance result: CPU time in serial and parallel for dry (left) and wet (right) dambreak.</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/55754-6.jpg" alt="" style="width:196pt;height:149pt;">
</div><br clear="all">
<p><span class="font4">Here in parallel implementation, the number of the processor for computing is eight cores. From Figure 4, a similar profile of CPU time can be seen for both numerical simulations. However, it can be seen that for both problems, similar CPU time in serial computing with grids number </span><span class="font10">N</span><span class="font1">x </span><span class="font10">= 3600 </span><span class="font4">and in parallel computing with </span><span class="font10">N</span><span class="font1">x </span><span class="font10">= 64000 </span><span class="font4">can be seen. This can be observed that the OpenMP platform is successfully applied, and it can reduce the computational cost of serial code.</span></p>
<div><img src="https://jurnal.harianregional.com/media/55754-7.jpg" alt="" style="width:174pt;height:149pt;">
<p><span class="font4" style="font-weight:bold;">Figure 5. </span><span class="font4">Performance result: Speedup (left) and Efficiency (right) of dry-wet dam-break.</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/55754-8.jpg" alt="" style="width:196pt;height:149pt;">
</div><br clear="all">
<p><span class="font4">Another parallel performance metrics, speedup, and efficiency are shown in Figure 5. These performance metrics are used to see how fast and efficient parallel computing in reducing the computational cost. As shown in Figure 5 (left), the speedup of parallel computing for both problems is reaching four times of serial computing. Moreover, since eight cores are used in this experiment, then the efficiency of parallel computing is approximately 51%, which is shown in Figure 5 (right). This means that only 51% of the average computational cost in serial code can be reduced. Since as we can see in the numerical algorithm of parallel (see Figure 2 for more detail), not all areas of computation can be parallelized. Some areas are still shown in serial computation. These performances are obtained from equations (12) and (13).</span></p>
<div><img src="https://jurnal.harianregional.com/media/55754-9.jpg" alt="" style="width:160pt;height:128pt;">
<p><span class="font3">0 1 2 3 4 5 6 7 8 9</span></p>
<p><span class="font4" style="font-variant:small-caps;">Number of Processors</span></p>
<p><span class="font4" style="font-weight:bold;">Figure 6. </span><span class="font4">The CPU time for some numbers of core in dry (left) and wet (right) bed dam-break.</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/55754-10.jpg" alt="" style="width:160pt;height:126pt;">
<p><span class="font3">0 1 2 3 4 5 6 7 8 9</span></p>
<p><span class="font4" style="font-variant:small-caps;">Number of Processors</span></p>
</div><br clear="all">
<p><span class="font4">For another addition, numerical simulation of parallel computing sung several numbers of cores (2, 3, 4, 8) are also elaborated. The results in dry wet dam-break problems can be seen in Figure 6. As shown in Figure 6, the increasing number of cores from 2 to 8, resulting in decreasing of CPU time. Indeed, the increasing number of cores causing some tasks are executed faster than using the low number of cores. And this result is shown for both problems. Indeed from Figure 6, an increasing number of cores into large numbers could not guarantee CPU time is always decreasing since efficiency factor becomes an obstacle in multicore parallel programming.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark22"></a><span class="font4" style="font-weight:bold;"><a name="bookmark23"></a>5. Conclusion</span></h2></li></ul>
<p><span class="font4">Parallel computing performances for simulating dry-wet dam-break problem using OpenMP and shallow water equation have been done. Two numerical simulations of the dam-break problem also have been well elaborated. Here, OpenMP is shown satisfying to reduce CPU time in several numbers of grid in simulation. Speedup of simulation using parallel computing is shown able to reach four times of serial computing. Moreover, the efficiency of numerical simulation using eight cores is obtained approximately 51%, with the number of the grid is </span><span class="font10">N</span><span class="font1">x </span><span class="font10">= 6400</span><span class="font4">.</span></p>
<h2><a name="bookmark24"></a><span class="font4" style="font-weight:bold;"><a name="bookmark25"></a>References</span></h2>
<ul style="list-style:none;"><li>
<p><span class="font4">[1] &nbsp;&nbsp;&nbsp;G. S. Stelling and S. A. Duinmeijer, “A staggered conservative scheme for every froude number in rapidly varied shallow water flows,” </span><span class="font4" style="font-style:italic;">International Journal for Numerical Methods in Fluids</span><span class="font4">, vol. 43, no. 12, pp. 1329–1354, 2003.</span></p></li>
<li>
<p><span class="font4">[2] &nbsp;&nbsp;&nbsp;B. Cushman-Roisin and J.-M. Beckers, </span><span class="font4" style="font-style:italic;">Introduction to geophysical fluid dynamics: physical and numerical aspects</span><span class="font4">. Academic Press, 2011, vol. 101.</span></p></li>
<li>
<p><span class="font4">[3] &nbsp;&nbsp;&nbsp;O. Delestre and P.-Y. Lagrée, “A well-balanced finite volume scheme for blood flow simulation,” </span><span class="font4" style="font-style:italic;">International Journal for Numerical Methods in Fluids</span><span class="font4">, vol. 72, no. 2, pp. 177–205, 2013.</span></p></li>
<li>
<p><span class="font4">[4] &nbsp;&nbsp;&nbsp;O. Delestre, S. Cordier, F. James, and F. Darboux, “Simulation of rain-water overland-flow,” in </span><span class="font4" style="font-style:italic;">12th International Conference on Hyperbolic Problems</span><span class="font4">, vol. 67. American Mathematical Society, 2008, pp. 537–546.</span></p></li>
<li>
<p><span class="font4">[5] &nbsp;&nbsp;&nbsp;O. Delestre and F. Marche, “A numerical scheme for a viscous shallow water model with friction,” </span><span class="font4" style="font-style:italic;">Journal of Scientific Computing</span><span class="font4">, vol. 48, no. 1-3, pp. 41–51, 2011.</span></p></li>
<li>
<p><span class="font4">[6] &nbsp;&nbsp;&nbsp;E. Audusse, F. Bouchut, M.-O. Bristeau, R. Klein, and B. Perthame, “A fast and stable well-balanced scheme with hydrostatic reconstruction for shallow water flows,” </span><span class="font4" style="font-style:italic;">SIAM Journal on Scientific Computing</span><span class="font4">, vol. 25, no. 6, pp. 2050–2065, 2004.</span></p></li>
<li>
<p><span class="font4">[7] &nbsp;&nbsp;&nbsp;F. Bouchut, </span><span class="font4" style="font-style:italic;">Nonlinear stability of finite Volume Methods for hyperbolic conservation laws: And Well-Balanced schemes for sources</span><span class="font4">. Frontiers in Mathematics. Birkhäuser Verlag, Basel, 2004.</span></p></li>
<li>
<p><span class="font4">[8] &nbsp;&nbsp;&nbsp;D. Doyen and P. H. Gunawan, “An explicit staggered finite volume scheme for the shallow water equations,” in </span><span class="font4" style="font-style:italic;">Finite Volumes for Complex Applications VII-Methods and Theoretical Aspects</span><span class="font4">. Springer, 2014, pp. 227–235.</span></p></li>
<li>
<p><span class="font4">[9] &nbsp;&nbsp;&nbsp;P. H. Gunawan, “Scientific parallel computing for 1d heat diffusion problem based on openmp,” in </span><span class="font4" style="font-style:italic;">Information and Communication Technology (ICoICT), 2016 4th International Conference on</span><span class="font4">. IEEE, 2016, pp. 1–5.</span></p></li>
<li>
<p><span class="font4">[10] &nbsp;&nbsp;&nbsp;M. de la Asunción, M. Castro, J. Mantas, and S. Ortega, “Numerical simulation of tsunamis generated by landslides on multiple gpus,” </span><span class="font4" style="font-style:italic;">Advances in Engineering Software</span><span class="font4">, vol. 99, pp. 59–72, 2016.</span></p></li>
<li>
<p><span class="font4">[11] &nbsp;&nbsp;&nbsp;M. De La Asunción, J. M. Mantas, and M. J. Castro, “Simulation of one-layer shallow water systems on multicore and cuda architectures,” </span><span class="font4" style="font-style:italic;">The Journal of Supercomputing</span><span class="font4">, vol. 58, no. 2, pp. 206–214, 2011.</span></p></li>
<li>
<p><span class="font4">[12] &nbsp;&nbsp;&nbsp;A. R. Brodtkorb, M. L. Sætra, and M. Altinakar, “Efficient shallow water simulations on gpus: Implementation, visualization, verification, and validation,” </span><span class="font4" style="font-style:italic;">Computers &amp;&nbsp;Fluids</span><span class="font4">, vol. 55, pp. 1–12, 2012.</span></p></li>
<li>
<p><span class="font4">[13] &nbsp;&nbsp;&nbsp;D. Castillo, A. Ferreiro, J. A. García-Rodríguez, and C. Vázquez, “Numerical methods to solve pde models for pricing business companies in different regimes and implementation in gpus,” </span><span class="font4" style="font-style:italic;">Applied Mathematics and Computation</span><span class="font4">, vol. 219, no. 24, pp. 11 233–11 257, 2013.</span></p></li>
<li>
<p><span class="font4">[14] &nbsp;&nbsp;&nbsp;R. J. LeVeque, </span><span class="font4" style="font-style:italic;">Finite volume methods for hyperbolic problems</span><span class="font4">. Cambridge university press, 2002, vol. 31.</span></p></li>
<li>
<p><span class="font4">[15] &nbsp;&nbsp;&nbsp;E. F. Toro, </span><span class="font4" style="font-style:italic;">Riemann solvers and numerical methods for fluid dynamics: a practical introduction</span><span class="font4">. Springer Science &amp;&nbsp;Business Media, 2013.</span></p></li>
<li>
<p><span class="font4">[16] &nbsp;&nbsp;&nbsp;O. Delestre, C. Lucas, P.-A. Ksinant, F. Darboux, C. Laguerre, T.-N. Vo, F. James, S. Cordier </span><span class="font4" style="font-style:italic;">et al.</span><span class="font4">, “Swashes: a compilation of shallow water analytic solutions for hydraulic and environmental studies,” </span><span class="font4" style="font-style:italic;">International Journal for Numerical Methods in Fluids</span><span class="font4">, vol. 72, no. 3, pp. 269–300, 2013.</span></p></li></ul>
<p><span class="font4">8</span></p>