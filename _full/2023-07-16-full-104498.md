---
layout: full_article
title: "Model Sinkronisasi Database Satu Arah dengan Metode Audit Log Menggunakan Apache Kafka"
author: "I Wayan Gus Arisna, I Made Sukarsa, Putu Wira Buana"
categories: jitter
canonical_url: https://jurnal.harianregional.com/jitter/full-104498 
citation_abstract_html_url: "https://jurnal.harianregional.com/jitter/id-104498"
citation_pdf_url: "https://jurnal.harianregional.com/jitter/full-104498"  
comments: true
---

<p><span class="font4">JITTER- Jurnal Ilmiah Teknologi </span><span class="font5">dan </span><span class="font4">Komputer Vol. 4, No. 2 August 2023</span></p><a name="caption1"></a>
<h1><a name="bookmark0"></a><span class="font7" style="font-weight:bold;"><a name="bookmark1"></a>Model Sinkronisasi Database Satu Arah dengan Metode</span><br><br><span class="font7" style="font-weight:bold;"><a name="bookmark2"></a>Audit Log Menggunakan Apache Kafka</span></h1>
<p><span class="font4" style="font-weight:bold;">I Wayan Gus Arisna <sup>a1</sup>, I Made Sukarsa <sup>a2</sup>, Putu Wira Buana <sup>a3 </sup></span><span class="font4"><sup>a</sup>Program Studi Teknologi Informasi, Fakultas Teknik, Universitas Udayana, Bali, Indonesia e-mail: </span><a href="mailto:1agus.aris83@gmail.com"><span class="font4"><sup>1</sup>agus.aris83@gmail.com</span></a><span class="font4">, </span><a href="mailto:2sukarsa@unud.ac.id"><span class="font4"><sup>2</sup>sukarsa@unud.ac.id</span></a><span class="font4">, </span><a href="mailto:3wbhuana@unud.ac.id"><span class="font4"><sup>3</sup>wbhuana@unud.ac.id</span></a></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Abstrak</span></p>
<p><span class="font4" style="font-style:italic;">Transaksi-transaksi bisnis semakin banyak dilakukan secara online, namun seiring perusahaan semakin maju, muncul masalah-masalah seperti ketidakmampuan dalam mengelola konsistensi data, khususnya ketika data tersebut berhubungan dengan lebih dari satu database. Sinkronisasi data adalah salah satu cara yang sering digunakan untuk penyelarasan data, dan replikasi merupakan metode yang paling banyak digunakan. Namun, agar data sepenuhnya konsisten, tidak cukup hanya dengan memanfaatkan proses replikasi. Permasalahan yang sering ditemui pada proses konfigurasi yang rumit. Pendekatan Audit Log merupakan salah satu objek alternatif yang dapat digunakan dalam mengembangkan sinkronisasi satu arah pada database. Audit Log adalah sebuah metode pencantatan perubahan yang ada pada database dengan menggunakan trigger. Data perubahan database tersebut yang nantinya menjadi acuan dalam sinkronisasi ke database lainnya. Pengiriman perubahan data pada database ke database yang lain memanfaatkan Apache Kafka. Apache merupakan open-source message broker yang memiliki perfoma tinggi sehingga dapat mengirim data secara realtime.</span></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Kata kunci: </span><span class="font4" style="font-style:italic;">Audit Log, Database, Trigger, Sinkronisasi, Message Broker, Kafka</span></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Abstract</span></p>
<p><span class="font4" style="font-style:italic;">Business transactions are increasingly conducted online. However, as companies advance, problems arise, such as the inability to manage data consistency, particularly when the data is related to more than one database. Data synchronization is a commonly used method for data alignment, and replication is the most widely used method. However, to ensure data is fully consistent, relying solely on replication processes is not enough. Configuration complexities are often encountered. The Audit Log approach is an alternative method that can be used to develop one-way synchronization in databases. Audit Log is a method of recording changes in a database using triggers. The changed data in the database serves as a reference for synchronization with other databases. The transmission of data changes from one database to another utilizes Apache Kafka. Apache Kafka is an open-source message broker that delivers high-performance, enabling real-time data transmission.</span></p>
<p><span class="font4" style="font-weight:bold;font-style:italic;">Keywords : </span><span class="font4" style="font-style:italic;">Audit Log, Database, Trigger, Synchronization, Message Broker, Kafka</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark3"></a><span class="font4" style="font-weight:bold;"><a name="bookmark4"></a>1. &nbsp;&nbsp;&nbsp;Pendahuluan</span></h2></li></ul>
<p><span class="font4">Perkembangan teknologi informasi telah menciptakan peluang bisnis baru, diantaranya transaksi-transaksi bisnis yang dilakukan secara online. Masalah baru muncul sejalan dengan kemajuan teknologi seperti ketidakmampuan dalam mengelola integrasi data, khususnya ketika data tersebut berhubungan dengan sistem database terdistribusi.</span></p>
<p><span class="font4">Integrasi data merupakan bagian terpenting dalam penerapan database terdistribusi, dimana data dari berbagai sumber bisa disatukan dengan menerapkan integrasi. Sistem database terdistribusi memiliki beberapa kelebihan, misalnya kemampuan untuk menangan ekspansi (enhancement atau pelebaran) data, ketersediaan data dan kemampuan untuk mengelola pendistribusian data [2]. Replikasi dalam database terdistribusi merupakan salah satu cara yang berguna untuk mendistribusikan data tersebut.</span></p>
<p><span class="font4">Mewujudkan data yang sepenuhnya konsisten, tidak cukup hanya dengan memanfaatkan proses replikasi. Permasalahan yang sering ditemui antara lain adalah kegagalan koneksi atau client yang sedang offline. Prosedur atau model sinkronisasi data dapat digunakan</span></p>
<p><span class="font4">untuk mengatasi masalah tersebut. Sinkronisasi data adalah bagian dari replikasi, ini adalah proses untuk memastikan setiap salinan database berisi objek dan data yang serupa. Proses sinkronisasi memungkinkan data pada database tertentu diperbarui secara real time atau periodik pada database lainnya.</span></p>
<p><span class="font4">Gudakesa melakukan penelitian untuk menyelesaikan permasalah tersebut menggunakan metode Audit Log untuk mengetahui perubahan database melalui trigger dan mengirim perubahan database menggunakan socket [1]. Audit Log merupakan mekanisme pencatatan aktivitas pengguna database seperti perintah SQL yang dijalankan, waktu perintah dijalankan dan parameter yang digunakan. Audit Log dapat dikonfigurasi oleh pengguna untuk mencatat perubahan data yang spesifik sehingga dapat memberikan performa yang bagus. Penelitian tersebut telah berhasil menangani pencatatan perubahan database, namun penelitian ini memiliki kekurangan yanng mana menggunakan socket untuk pengiriman data yang dapat menimbulkan beberapa permasalah yaitu kegagalan sinkronisasi saat host dalam keadaan offline dan keamaan data dalam pesan.</span></p>
<p><span class="font4">Penelitian ini dibuat untuk memperbaiki permasalahan sinkronasi database yang telah dilakukan pada penetian sebelumnya dengan menggunakan pendekatan yang berbeda untuk sinkronisasi database satu arah. Penelitian ini menggunakan metode Audit Log untuk mendapatkan perubahaan pada database dan message broker sebagai pengganti socket dalam pertukaran data. Apache Kafka adalah message broker open source yang memiliki perfoma tinggi. Apache Kafka sesuai digunakan dalam penelitian ini sebagai media pertukaran data karena memiliki reabilitas yang tinggi dimana data akan pasti terjaga saat salah satu host dalam keadaan offline dan keamanan pesan dijaga dengan TLS/SSL encryption.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark5"></a><span class="font4" style="font-weight:bold;"><a name="bookmark6"></a>2. &nbsp;&nbsp;&nbsp;Metode Penelitian</span></h2></li></ul>
<p><span class="font4">Metode penelitian dari model sinkronisasi yang dikembangkan terdiri dari 4 langkah, yang dapat dilihat pada Gambar 1.</span></p><img src="https://jurnal.harianregional.com/media/104498-1.jpg" alt="" style="width:101pt;height:137pt;">
<p><span class="font4">Gambar 1. Metode Penelitian</span></p>
<p><span class="font4">Gambar 1 menunjukan langkah-langkah yang dilakukan dalam pengembangan model sinkronisasi. Tahap Persiapan merupakan tahap melakukan pengumpulan informasi seperti jenis message broker dan bahasa pemrograman yang akan digunakan. Tahap perancangan sistem merupakan tahap melakukan perancangan bisnis proses sinkronasi, perancangan algoritma setiap service yang dibuat. Tahap pembuatan sistem merupakan melakukan pemrograman terhadap setiap service yang telah direncanakan. Tahap pengujian merupakan tahap pengujian terhadap service yang telah di-install pada dua buah host dengan jumlah data yang berbeda-beda. Gambaran umum dari sistem yang dikembangkan dapat dilihat pada Gambar 2.</span></p><img src="https://jurnal.harianregional.com/media/104498-2.jpg" alt="" style="width:325pt;height:209pt;">
<p><span class="font4">Gambar 2. Gambaran Umum</span></p>
<p><span class="font4">Terdapat tiga komponen penting pada penelitian ini yaitu Master, Slave dan Broker. Master merupakan host yang terhubung dengan database utama yang dijadikan patokan untuk database lainnya. Slave merupakan host yang terhubung dengan database sekunder yang bersifat homogeneus dengan database utama. Broker merupakan host yang memegang Apache Kafka yang menghubungkan Master dan Slave agar dapat mengirim pesan satu sama lain. Pesan yang dikirim berisikan data perubahan database yang diambil dengan menggunakan metode Audit Log. Penelitian ini menggunakan publish-subscribe pattern yang ada pada Apache Kafka untuk mengirim pesan. Setiap host yang men-subscribe spesifik topic akan menerima pesan yang di-publish ke Apache Kafka. Master memerlukan Producer Service yang berfungsi untuk mengirim pesan yang berisi data perubahaan database ke Broker. Slave memerlukan Consumer Service yang berfungsi untuk mengambil pesan dari Broker dan melakukan perubahan data bedasarkan pesan tersebut. Producer Service dan Consumer dikembangkan dengan menggunakan bahasa pemrograman Python.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark7"></a><span class="font4" style="font-weight:bold;"><a name="bookmark8"></a>3. &nbsp;&nbsp;&nbsp;Kajian Pustaka</span><br><br><span class="font4" style="font-weight:bold;"><a name="bookmark9"></a>3.1. &nbsp;&nbsp;&nbsp;Sinkronisasi</span></h2></li></ul>
<p><span class="font4">Sinkronisasi data adalah suatu proses untuk menjaga konsistensi data pada suatu server dengan server lainnya. Terdapat proses penyalinan data yang disimpan ke dalam suatu tabel dan skema yang berada pada database yang lain. Proses sinkronisasi memungkinkan suatu data yang berada pada database tertentu dapat diperbarui secara langsung maupun berkala pada database yang lain. Teknik ini merupakan dasar dari konsep replikasi yang ada pada database. Mekanisme sinkronisasi ini diperlukan untuk mengubah data yang terdapat pada global schema secara langsung. Data yang diperbaharui pada global schema merupakan data yang berada pada local schema dari database yang terdistribusi. Antara local schema dengan global schema bisa jadi mempunyai skema yang secara struktur datanya dapat sama (homogeneous), ataupun berbeda (heterogeneous). Proses sinkronisasi pada database harus dapat menyesuaikan struktur data yang ada pada setiap database yang berbeda. Hal ini harus diterapkan untuk menjaga konsistensi data [2].</span></p>
<p><span class="font4">John Arissaputra melakukan penelitian serupa untuk menyelesaikan permasalah tersebut menggunakan metode Binary Log untuk mengetahui perubahan disetiap basis data lalu perubahan tersebut dikirim ke host lain yang mereplikasi basis data tersebut menggunakan socket. Penelitian tersebut berhasil menangani masalah koneksi jaringan dan host yang offline saat proses replikasi [4].</span></p>
<p><span class="font4">Hanafi melakukan nenelitian mengenai sinkronasi database menggunakan API Dropbox sebagai third party. Kebutuhan sistem yang harus multitasking dan memiliki reliabilitas yang tingg mampu menjadikan database tidak hanya sebagai media penyimpanan data, namun juga</span></p>
<p><span class="font4">sebagai sarana pertukaran data. Mekanisme pertukaran data yang dilakukan yaitu melewat Dropbox sebagai perantara dan meneruskan ke tujuan pengiriman dengan memafaatkan identifier email dari pengguna Dropbox, sehingga pesan disingkronkan ke dalam database penerima [5].</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark10"></a><span class="font4" style="font-weight:bold;"><a name="bookmark11"></a>3.2. &nbsp;&nbsp;&nbsp;MySQL Database</span></h2></li></ul>
<p><span class="font4">MySQL merupakan sebuah program database server yang mampu menerima dan mengirimkan data dengan sangat cepat, multi user serta menggunakan perintah dasar SQL (Structured Query Language). MySQL merupakan sebuah database server yang dapat digunakan secara bebas tanpa perlu membeli lisensi sehingga dapat digunakan untuk database ini untuk keperluan pribadi atau usaha. MySQL dikembangkan seorang programmer database bernama Michael Widenius. Selain database server, MySQL juga merupakan program yang dapat mengakses suatu database MySQL yang berposisi sebagai Server, yang berarti program kita berposisi sebagai Client. Jadi MySQL adalah sebuah database yang dapat digunakan sebagai Client maupun Server [6].</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark12"></a><span class="font4" style="font-weight:bold;"><a name="bookmark13"></a>3.3. &nbsp;&nbsp;&nbsp;Audit Log</span></h2></li></ul>
<p><span class="font4">Konsep dari Audit Log adalah mendokumentasikan apabila terdapat perubahan pada sistem dan secara otomatis menciptakan log komputer. Bentuk dari log pada umumnya adalah berupa file, namun tabel database dapat digunakan. Audit Log pada database SQL adalah mekanisme pencatatan aktivitas pengguna seperti perintah SQL yang dijalankan. Penerapan Audit Log pada database MySQL dilakukan dengan memanfaatkan trigger dan tabel [1]. Trigger pada MySQL adalah perintah SQL yang dapat berjalan secara otomatis saat terjadi event insert, update dan delete. Penerapan Audit Log dapat dilakukan dengan cara memasang trigger ke setiap tabel pada database. Trigger akan mencatat setiap perubahan data selama proses insert, update dan delete berlangsung dan menyimpannya ke suatu tabel yang selanjutnya diproses untuk kebutuhan tertentu. Tabel dalam MySQL adalah struktur dasar yang digunakan untuk menyimpan dan mengorganisir data dalam basis data. Tabel terdiri dari kolom dan baris yang membentuk skema yang terstruktur. Setiap kolom dalam tabel memiliki nama dan tipe data yang menentukan jenis nilai yang dapat disimpan di dalamnya. Tabel pada penerapan Audit Log berfungsi untuk tempat penyimpanan data perubahaan database yang ditangkap oleh trigger.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark14"></a><span class="font4" style="font-weight:bold;"><a name="bookmark15"></a>3.4. &nbsp;&nbsp;&nbsp;Apache Kafka</span></h2></li></ul>
<p><span class="font4">Apache Kafka adalah sebuah platform open-source yang digunakan untuk mengelola aliran data secara real-time. Apache Kafka pada awalnya dikembangkan di LinkedIn dan sekarang menjadi bagian dari yayasan Apache Software Foundation. Apache Kafka dirancang untuk menangani volume data yang besar dan memungkinkan pertukaran data yang efisien antara producer dan consumer [7]. Arsitektur dari Apache Kafka dapat dilihat pada Gambar 3.</span></p><img src="https://jurnal.harianregional.com/media/104498-3.jpg" alt="" style="width:263pt;height:154pt;">
<p><span class="font4">Apache Kafka menggunakan konsep publish-subscribe yang mana produser mengirimkan data ke topic, dan consumer dapat men-subscribe ke topik tersebut untuk menerima data secara real-time. Data dalam Apache Kafka disimpan dalam urutan yang terorganisir dalam struktur log yang disebut commit log. Setiap pesan yang masuk diberi nomor urut dan disimpan dalam commit log, yang memungkinkan akses cepat dan efisien ke data. Kafka memilik kehandalan yang tinggi dalam pengiriman pesan. Setiap pesan yang diterima oleh Kafka disimpan dalam log yang persisten dan tahan bencana. Pesan hanya dihapus setelah periode retensi tertentu atau dengan kebijakan penghapusan yang ditentukan. Ini memastikan bahwa data dapat diakses dalam jangka waktu yang lama dan terhindar dari kehilangan.</span></p>
<p><span class="font4">Guo Fu melakukan penelitian perbandingan diantara lima sistem message queue. Kelima sistem message queue tersebut diantara lain adalah RabbitMQ, Apache Kafka, RocketMQ, ActiveMQ and Pulsar. Penelitian tersebut membandingkan setiap sistem dalam beberapa aspek yaitu activity community, latecy, throughput, multifunction, transaction message, delivery guarantee, scalability, realibity dan order guarantee [8]. Hasil penelitian tersebut menunjukan Apache Kafka memiliki throughput tertinggi dan menjadi rekomendasi untuk sistem yang menangani pesan dalam jumlah besar seperti log processing, big data analysis dan stream processing.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark16"></a><span class="font4" style="font-weight:bold;"><a name="bookmark17"></a>3.5. &nbsp;&nbsp;&nbsp;Python</span></h2></li></ul>
<p><span class="font4">Python adalah bahasa pemrograman tingkat tinggi yang bersifat interpretatif dan serba guna. Bahasa pemogragaman Python dikembangkan pada awal tahun 1990-an oleh Guido van Rossum, Python menekankan sintaks yang bersih, mudah dibaca, dan memungkinkan pengembangan perangkat lunak yang lebih produktif. Python memiliki beberapa keunggulan yaitu mudah dibaca, community support yang kuat, portabilitas, multi-paradigma dan developer experience yang bagus [9].</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark18"></a><span class="font4" style="font-weight:bold;"><a name="bookmark19"></a>4. &nbsp;&nbsp;&nbsp;Hasil dan Pembahasan</span><br><br><span class="font4" style="font-weight:bold;"><a name="bookmark20"></a>4.1. &nbsp;&nbsp;&nbsp;Audit Log</span></h2></li></ul>
<p><span class="font4">Audit Log pada database SQL adalah mekanisme pencatatan aktivitas pengguna sepert perintah SQL yang dijalankan. Penerapan Audit Log pada database MySQL dilakukan dengan memanfaatkan trigger dan tabel. Setiap tabel pada database memiliki tiga trigger untuk menangkap event insert, update dan delete. Algoritma dari trigger-trigger yang digunakan untuk mencatat perubahan database dapat dilihat pada Gambar 4.</span></p><img src="https://jurnal.harianregional.com/media/104498-4.jpg" alt="" style="width:195pt;height:168pt;">
<ul style="list-style:none;"><li>
<p><span class="font4">Gambar 4. Flowchart Trigger</span></p></li></ul>
<p><span class="font4">Trigger akan berjalan saat terjadi event pada tabel database. Proses penentuan nila kolom uuid terjadi hanya untuk event insert. Proses generate event query merupakan proses pembuatan sintaks query SQL bedasarkan event yang terjadi. Trigger akan menyimpan sintaks query SQL ke dalam tabel audit_changelog. Struktur dari tabel audit_changelog dapat dilihat pada Tabel 1.</span></p>
<table border="1">
<tr><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Nama Kolom</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Tipe Data</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Keterangan</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">changelog_id</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">bigint</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Primary key dari tabel</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">query</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">text</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Query hasil generasi dari trigger</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">table</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">varchar</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Nama tabel dari event yang terjadi</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">pk</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">bigint</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Primary key dari event yang terjadi</span></p></td></tr>
<tr><td style="vertical-align:middle;">
<p><span class="font4">type</span></p></td><td style="vertical-align:middle;">
<p><span class="font4">tinyint</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Tipe dari event yang terjadi untuk insert (1), update (2) dan delete (3)</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">created_at</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">datetime</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Timestamp dari event yang terjadi</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">published</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">tinyint</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Status event dipublish ke Broker</span></p></td></tr>
</table>
<p><span class="font4">Simulasi dilakukan untuk mengetahui mengetahui bagaimana Event Trigger dan</span></p>
<p><span class="font4">Changelog Trigger berkerja. Contoh tabel transaksi untuk simulasi dapat dilihat pada Gambar 5.</span></p>
<table border="1">
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td colspan="2" style="vertical-align:bottom;">
<p><span class="font10">nim</span></p></td><td style="vertical-align:bottom;">
<p><span class="font10">waktu</span></p></td><td style="vertical-align:bottom;">
<p><span class="font10">nominal ukt</span></p></td><td style="vertical-align:bottom;">
<p><span class="font10">flag</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">1</span></p></td><td colspan="2" style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16Θ555Θ1 2Θ23-Θ7-15 01:13</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">1000000</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16Θ555Θ2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2Θ23-Θ7-16 01:13</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2ΘΘΘ0ΘΘ</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16055503</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2Θ23-Θ7-17 01:13</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">3ΘΘΘ0ΘΘ</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font6">*</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">(Auto)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td></tr>
</table>
<p><span class="font4">Gambar 5. Tabel Transaksi Master</span></p>
<p><span class="font4">Tabel transaksi mempunyai lima kolom dengan tipe data yang berbeda. Contoh triggertrigger yang menangani event yang terjadi pada tabel transaksi dapat dilihat pada Gambar 6.</span></p>
<p><span class="font3" style="font-weight:bold;">B S mastordb</span></p>
<p><span class="font3">B </span><span class="font2">E Tables</span></p>
<p><span class="font2">E E audit changelog</span></p>
<p><span class="font2">E E tbjrx</span></p>
<p><span class="font2">E « Views</span></p>
<p><span class="font2">E 0 Stored Procs</span></p>
<p><span class="font2">E A Functions</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2">□ &nbsp;&nbsp;&nbsp;≠ Triggers</span></p></li>
<li>
<p><span class="font2">♦ &nbsp;&nbsp;&nbsp;auditlog_delete_tb_trx</span></p></li>
<li>
<p><span class="font2">♦ &nbsp;&nbsp;&nbsp;auditlog_insert_tb_trx</span></p></li>
<li>
<p><span class="font2">♦ &nbsp;&nbsp;&nbsp;auditlogupdatetbtrx</span></p></li></ul>
<p><span class="font2">E © Events</span></p>
<ul style="list-style:none;"><li>
<p><span class="font4">Gambar 6. Trigger Auditlog</span></p></li></ul>
<p><span class="font4">Trigger-trigger pada Gambar 6 mempunyai tugas untuk menangani event insert, update dan delete pada tabel transaksi. Tabel tb_alphabet sudah mengalami event insert yang mana terdapat 3 baris data pada Gambar 5. Menerapkan event update dan delete pada tabel transaks dilakukan memodifikasi baris data yang sudah ada. Kondisi tabel transaksi setelah modifikas dapat dilihat pada Gambar 7.</span></p>
<table border="1">
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">id</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">nim</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">waktu</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">nominal ukt</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">flag</span></p></td></tr>
<tr><td style="vertical-align:top;"></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16055501</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2Θ23-Θ7-15 01:13</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">1ΘΘΘΘΘ0</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font6">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16055502</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2023-07-16 01:13</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">5ΘΘΘΘΘ0</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">0</span></p></td></tr>
<tr><td style="vertical-align:top;">
<p><span class="font6">*</span></p></td><td style="vertical-align:top;">
<p><span class="font2" style="font-weight:bold;">f Autoi</span></p></td><td style="vertical-align:top;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:top;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">CNULL)</span></p></td><td style="vertical-align:top;">
<p><span class="font3" style="font-style:italic;font-variant:small-caps;">CnullI</span></p></td><td style="vertical-align:top;">
<p><span class="font3" style="font-style:italic;font-variant:small-caps;">CnullI</span></p></td></tr>
</table>
<ul style="list-style:none;"><li>
<p><span class="font4">Gambar 7. Tabel Transaksi Master Setelah Modifikasi</span></p></li></ul>
<p><span class="font4">Menerapkan event update dilakukan dengan mengupdate kolom nominal_ukt dan kolom flag pada baris data dengan primary key 2. Menerapkan event delete dilakukan dengan menghapus baris data dengan primary key 3. Trigger melakukan pencatatan perubahan data dan menyimpan perubahan data ke dalam tabel audit_changelog. Data dari tabel audit_changelog dapat dilihat pada Gambar 8.</span></p>
<table border="1">
<tr><td style="vertical-align:bottom;">
<p><span class="font8">changelog_id</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">query</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">∣table</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">pk &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">published</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">created at</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">TNSFRT TNTO th trx Cflaq. nim, nominal ukt. waktu) VALUE...</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">109B tb trx</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">0 2023-07-14 17:13:21</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">INSERT INTO tb trx Cftaq. nim, nominal ukt, waktu) VALUE ...</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">109B tb trx</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">0 2023-07-14 17:13:45</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">INSERT INTO tb trx Cflaq, nim. nominal ukt. waktu) VALUE ...</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">109B tb_trx</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">Θ2023-Θ7-14 17:14:05</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">M</span></p></td><td style="vertical-align:bottom;">
<p><span class="font1" style="font-variant:small-caps;">update</span><span class="font8"> tb trx </span><span class="font1" style="font-variant:small-caps;">set</span><span class="font8"> flaα ≡ <sup>,</sup>θ<sup>,</sup>. nim = <sup>1</sup>16Θ555Θ2<sup>,</sup>. nominal ...</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">117B tb trx</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">Θ2Θ23-Θ7-14 17:23:42</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">5</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">DELETE FROM tb trx WHERE id=3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">29B tb trx</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">3</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">Θ2θ23-07-14 17:23:45</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font8">(Auto)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8" style="font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">ΘK </span><span class="font8" style="font-style:italic;">CNULL)</span></p></td><td colspan="2" style="vertical-align:bottom;">
<p><span class="font8" style="font-style:italic;">(NULL) (NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font8">θCURRENT TIMESTAMP</span></p></td></tr>
</table>
<ul style="list-style:none;"><li>
<p><span class="font4">Gambar 8. Tabel Audit Changelog</span></p></li></ul>
<p><span class="font4">Hasil generasi query dari setiap event yang terjadi pada tabel transaksi dapat dilihat pada kolom query. Terdapat tiga query insert yang merupakan hasil dari event insert pada Gambar 5, satu query update dan satu query delete yang merupakan hasil dari event update dan delete pada Gambar 7. Simulasi ini berhasil menunjukan bahwa metode Audit Log berhasil dilakukan.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark21"></a><span class="font4" style="font-weight:bold;"><a name="bookmark22"></a>4.2. &nbsp;&nbsp;&nbsp;Producer Service</span></h2></li></ul>
<p><span class="font4">Producer Service merupakan service Master yang bertugas untuk mengirim pesan yang berisi perubahan database dari Master ke Broker. Flowchart dari Producer Service dapat dilihat pada Gambar 9.</span></p>
<div><img src="https://jurnal.harianregional.com/media/104498-5.jpg" alt="" style="width:239pt;height:208pt;">
</div><br clear="all">
<p><span class="font4">Gambar 9. Flowchart Producer Service</span></p>
<p><span class="font4">Producer Service terus mengecek pesan yang memiliki status belum dipublish pada tabel audit_changelog. Jika terdapat pesan yang belum dipublish pada tabel audit_changelog, Producer Service akan mengambil dan mengirim pesan tersebut ke Broker. Producer Service meng-update status pesan menjadi sudah dipublish setelah selesai mengirim pesan ke Broker. Simulasi dilakukan untuk mengetahui Producer Service berkerja. Simulasi dapat dilihat pada Gambar 10.</span></p>
<div>
<p><span class="font5">□ &nbsp;&nbsp;×</span></p>
</div><br clear="all">
<ul style="list-style:none;"><li>
<p><span class="font1" style="font-weight:bold;">&lt;5 Ubuntu &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× &nbsp;&nbsp;&nbsp;+ <sup>v</sup></span></p></li></ul>
<p><span class="font2" style="font-weight:bold;">auditlog-kafka on P rain via ♦ v3.1θ.6</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2" style="font-weight:bold;">&gt; py main.py produce</span></p></li></ul>
<ul style="list-style:none;"><li>
<p><span class="font2" style="font-weight:bold;">[1] INS tb_trx:l → KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[2] INS tb_trx:2 → KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[3] INS tb_trx:3 → KAFKA</span></p></li></ul>
<ul style="list-style:none;"><li>
<p><span class="font2" style="font-weight:bold;">[A] UPD tb_trx:2 → KAFKA</span></p></li></ul>
<ul style="list-style:none;"><li>
<p><span class="font2" style="font-weight:bold;">[5] DEL tb_trx:3 → KAFKA</span></p></li></ul>
<p><span class="font4">Gambar 10. Simulasi Producer Service</span></p>
<p><span class="font4">Producer Service mengambil semua pesan yang dipublish dari tabel audit_changelog dan mengirim semua pesan ke Broker. Producer Service meng-update status pesan-pesan tersebut menjadi sudah dipublish setelah selesai mengirim ke Broker untuk mencegah pesan</span></p>
<p><span class="font4">yang sama terkirim kembali. Pesan-pesan yang sudah dikirim dan berada dalam Apache Kafka Broker dapat pada Gambar 11.</span></p>
<p><span class="font0">Topics </span><span class="font1">auditlog &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">ProduceMessage ;</span></p>
<p><span class="font0">Overview Messages Consumers Settings Statistics</span></p>
<p><span class="font0">Seek Type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Partitions &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key Serde &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value Serde</span></p>
<p><span class="font0">Offset v Offset &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All items are selected, v String &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sup>v</sup> String &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sup>v</sup> Clear all </span><span class="font11">∣</span><span class="font0"> Submit &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Oldest First <sup>v</sup></span></p>
<p><span class="font0">Q Search &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O + Add Filters</span></p>
<p><span class="font0">DONE ® 63 ms I 1013 Bytes 0 5 messages consumed</span></p>
<table border="1">
<tr><td style="vertical-align:top;"></td><td style="vertical-align:top;">
<p><span class="font0">Offset</span></p></td><td style="vertical-align:top;">
<p><span class="font0">Partition</span></p></td><td style="vertical-align:top;">
<p><span class="font0">Timestamp</span></p></td><td style="vertical-align:top;">
<p><span class="font0">Key Preview</span></p></td><td style="vertical-align:top;">
<p><span class="font0">Value Preview</span></p></td></tr>
<tr><td style="vertical-align:top;">
<p><span class="font4" style="font-weight:bold;">□</span></p></td><td style="vertical-align:top;">
<p><span class="font0">0</span></p></td><td style="vertical-align:top;">
<p><span class="font0">0</span></p></td><td style="vertical-align:top;">
<p><span class="font0">7/15/2023,14:25:49</span></p></td><td style="vertical-align:top;"></td><td style="vertical-align:top;">
<p><span class="font0">{&quot;changelogjd&quot;: 1, &quot;query&quot;: &quot;INSERT INTO tb_trx (.</span></p></td></tr>
<tr><td style="vertical-align:middle;">
<p><span class="font4" style="font-weight:bold;">□</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">1</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">0</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">7/15/2023,14:25:49</span></p></td><td style="vertical-align:top;"></td><td style="vertical-align:middle;">
<p><span class="font0">{&quot;changelogjd&quot;: 2, &quot;query&quot;: &quot;INSERT INTO tb_trx..</span></p></td></tr>
<tr><td style="vertical-align:middle;">
<p><span class="font4" style="font-weight:bold;">□</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">2</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">0</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">7/15/2023,14:25:49</span></p></td><td style="vertical-align:top;"></td><td style="vertical-align:middle;">
<p><span class="font0">{&quot;changelogjd&quot;: 3, &quot;query&quot;: &quot;INSERT INTO tb_trx..</span></p></td></tr>
<tr><td style="vertical-align:middle;">
<p><span class="font4" style="font-weight:bold;">□</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">3</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">0</span></p></td><td style="vertical-align:middle;">
<p><span class="font0">7/15/2023,14:25:49</span></p></td><td style="vertical-align:top;"></td><td style="vertical-align:middle;">
<p><span class="font0">{&quot;changelogjd&quot;: 4, &quot;query&quot;: &quot;UPDATE tb_trx SET f.</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">□</span></p></td><td style="vertical-align:bottom;">
<p><span class="font0">4</span></p></td><td style="vertical-align:bottom;">
<p><span class="font0">0</span></p></td><td style="vertical-align:bottom;">
<p><span class="font0">7/15/2023,14:25:49</span></p></td><td style="vertical-align:top;"></td><td style="vertical-align:bottom;">
<p><span class="font0">{&quot;changelogjd&quot;: 5, &quot;query&quot;: &quot;DELETE FROM tb_tr...</span></p></td></tr>
</table>
<p><span class="font4">Gambar 11. Pesan-Pesan Pada Broker</span></p>
<p><span class="font4">Semua pesan yang dikirm oleh Producer Service berada dalam parition dengan topic auditlog pada Apache Kafka Broker. Jumlah pesan yang berada dalam Broker sesuai dengan jumlah pesan yang dikirim oleh Producer Serivce. Simulasi ini berhasil menunjukan bahwa Producer Service berhasil mengirim pesan dari Master ke Broker.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark23"></a><span class="font4" style="font-weight:bold;"><a name="bookmark24"></a>4.3. &nbsp;&nbsp;&nbsp;Consumer Service</span></h2></li></ul>
<p><span class="font4">Consumer Service merupakan service Slave yang bertugas untuk mengambil pesan dar Broker dan mengeksekusi query hasil generasi yang terdapat pada pesan ke database Slave. Flowchart dari Consumer Service dapat dilihat pada Gambar 12.</span></p><img src="https://jurnal.harianregional.com/media/104498-6.jpg" alt="" style="width:244pt;height:172pt;">
<p><span class="font4">Gambar 12. Flowchart Consumer Service</span></p>
<p><span class="font4">Consumer Service men-subscribe topic auditlog yang berada pada Broker untuk menerima setiap pesan yang masuk dengan topic tersebut. Consumer Service akan mengeksekusi query dari setiap pesan yang diterima ke database Slave untuk melakukan sinkroniasi. Simulasi dilakukan untuk mengetahui Consumer Service berkerja. Simulasi dapat dilihat pada Gambar 13.</span></p>
<p><span class="font1" style="font-weight:bold;">O Ubuntu</span></p>
<div>
<p><span class="font5">□ &nbsp;&nbsp;×</span></p>
</div><br clear="all">
<div><img src="https://jurnal.harianregional.com/media/104498-7.jpg" alt="" style="width:40pt;height:12pt;">
<p><span class="font2" style="font-weight:bold;">via * v3.10.6</span></p>
</div><br clear="all">
<p><span class="font2" style="font-weight:bold;">auditlog-kafka on ' main !?</span></p>
<p><span class="font2" style="font-weight:bold;">&gt; py main.py consume</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2" style="font-weight:bold;">[1] INS tb_trx:l &lt;- KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[2] INS tb_trx:2 &lt;- KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[3] INS tb_trx:3 &lt;- KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[4] UPD tb_trx:2 &lt;- KAFKA</span></p></li>
<li>
<p><span class="font2" style="font-weight:bold;">[5] DEL tb_trx:3 &lt;- KAFKA</span></p></li></ul>
<p><span class="font4">Gambar 13. Simulasi Consumer Service</span></p>
<p><span class="font4">Consumer Service mengambil semua pesan yang berada pada Broker dengan topic auditlog. Setiap pesan memiliki query yang dieksekusi oleh Consumer Service agar data pada tabel transaksi tersinkronisasi. Kondisi tabel transaksi pada Slave setelah proses sinkronisas dapat dilihat pada Gambar 14.</span></p>
<table border="1">
<tr><td style="vertical-align:top;"></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">nim</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">waktu</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">nominal ukt</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">flag</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16055501</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2Θ23-Θ7-15 01:13:07</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">1ΘΘΘΘ0Θ</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">1</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">16055502</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">2Θ23-Θ7-16 01:13:07</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">5θθθθθθ</span></p></td><td style="vertical-align:bottom;">
<p><span class="font9">θ</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;">(Auto)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font2" style="font-weight:bold;font-style:italic;">(NULL)</span></p></td></tr>
</table>
<p><span class="font4">Gambar 14. Tabel Transaksi Slave</span></p>
<p><span class="font4">Gambar 14 menunjukan bahwa data tabel transaksi pada Slave sama dengan data tabel transaksi pada Master. Simulasi ini berhasil menunjukan bahwa Consumer Service berhasil mengambil pesan dari Broker dan mengeksekusi setiap query dari pesan untuk melakukan sinkronisasi data.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark25"></a><span class="font4" style="font-weight:bold;"><a name="bookmark26"></a>4.4. &nbsp;&nbsp;&nbsp;Pengujian Sistem</span></h2></li></ul>
<p><span class="font4">Pengujian dilakukan dengan menghitung waktu yang diperlukan untuk melakukan sinrkonisasi. Skenario pengujian dapat dilihat pada Gambar 15.</span></p>
<div><img src="https://jurnal.harianregional.com/media/104498-8.jpg" alt="" style="width:176pt;height:65pt;">
</div><br clear="all">
<p><span class="font4">Gambar 15. Skenario Pengujian</span></p>
<p><span class="font4">Master mengirm data sejumlah n ke Slave. Sebagai contoh, jika n bernilai 100 maka Master mengirim 100 data ke Slave. Waktu sinkronisasi diambil dari rentang waktu diantara data pertama dan data terakhir. Spesifikasi dari setiap host dapat dilihat pada Table 2.</span></p>
<p><span class="font4">Tabel 2. Spesifikasi Master dan Slave</span></p>
<table border="1">
<tr><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Komponen</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Master</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4" style="font-weight:bold;">Slave</span></p></td></tr>
<tr><td style="vertical-align:middle;">
<p><span class="font4">CPU</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Intel Core i7 4.90 GHz (8 core)</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">Intel Core i7 4.90 GHz (4 core)</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">RAM</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">8 GB</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">4 GB</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">Storage</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">SSD 475 GB</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">SSD 32 GB</span></p></td></tr>
</table>
<p><span class="font4">Pengujian dilakukan menggunakan satu tabel bernama tb_trx. Struktur dari tabel tb_trx dapat dilihat pada Gambar 16.</span></p><img src="https://jurnal.harianregional.com/media/104498-9.jpg" alt="" style="width:343pt;height:54pt;">
<p><span class="font4">Gambar 16. Tabel Pengujian</span></p>
<p><span class="font4">Database Master dan Slave mempunyai sebuah tabel bernama tb_trx untuk disinkronisasi. Semua data yang disinkronisasi merupakan data dari tabel tb_trx.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark27"></a><span class="font4" style="font-weight:bold;"><a name="bookmark28"></a>4.4. &nbsp;&nbsp;&nbsp;Hasil Pengujian Sistem</span></h2></li></ul>
<p><span class="font4">Terdapat 3 tahapan yang dilakukan dalam pengujian yaitu tahap pengujian insert, tahap pengujian update dan tahap pengujian delete. Hasil dari pengujian sistem dapat dilihat pada Table 3.</span></p>
<p><span class="font4">Tabel 3. Hasil Pengujian</span></p>
<table border="1">
<tr><td style="vertical-align:middle;">
<p><span class="font4" style="font-weight:bold;">DML</span></p></td><td style="vertical-align:top;">
<p><span class="font4" style="font-weight:bold;">Time Consumption (seconds) 100 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;200 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;400 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;600 &nbsp;&nbsp;&nbsp;&nbsp;1000</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">Insert</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">Update</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12</span></p></td></tr>
<tr><td style="vertical-align:bottom;">
<p><span class="font4">Delete</span></p></td><td style="vertical-align:bottom;">
<p><span class="font4">2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11</span></p></td></tr>
</table>
<p><span class="font4">Pengujian insert dilakukan dengan mencatat waktu yang diperlukan untuk mereplikasikan data sejumlah n secara bersamaan. Hasil pengujian menunjukan sistem sinkronisasi memerlukan 2 detik untuk 100 data, 3 detik untuk 200 data, 6 detik untuk 400 data, 9 detik untuk 600 data dan 11 detik untuk 1000 data.</span></p>
<p><span class="font4">Pengujian update dilakukan dengan menginisiasi sejumlah n data di awal dan mencatat waktu diperlukan untuk meng-update setiap baris data sampai semua n data tersinkronisasi. Hasil pengujian menunjukan sistem sinkronisasi memerlukan 2 detik untuk 100 data, 4 detik untuk 200 data, 6 detik untuk 400 data, 8 detik untuk 600 data dan 12 detik untuk 1000 data.</span></p>
<p><span class="font4">Pengujian delete dilakukan dengan menginisiasi sejumlah n data di awal dan mencatat waktu diperlukan untuk menghapus setiap baris data sampai semua n data tersinkronisasi. Hasil pengujian menunjukan sistem sinkronisasi memerlukan 2 detik untuk 100 data, 4 detik untuk 200 data, 6 detik untuk 400 data, 8 detik untuk 600 data dan 11 detik untuk 1000 data. Hasil pengujian dalam bentuk grafik dapat dilihat pada Gambar 17.</span></p>
<p><span class="font13">Result</span></p>
<p><span class="font12">14</span></p><img src="https://jurnal.harianregional.com/media/104498-10.jpg" alt="" style="width:172pt;height:119pt;">
<p><span class="font12">—•— Insert</span></p>
<p><span class="font12">^- Update</span></p>
<p><span class="font12">—•— Delete</span></p>
<p><span class="font12">Data Data Data Data Data</span></p>
<p><span class="font4">Gambar 17. Grafik Hasil Pengujian</span></p>
<p><span class="font4">Gambar 17 menunjukan grafik dari hasil pengujian sistem sinkronisasi. Terlihat bahwa grafiknya relatif stabil meskipun data yang diproses semakin besar. Hal ini menunjukkan bahwa</span></p>
<p><span class="font4">sistem sinkronisasi yang dikembangkan cukup stabil untuk menangani pertumbuhan data yang terus menerus.</span></p>
<ul style="list-style:none;"><li>
<h2><a name="bookmark29"></a><span class="font4" style="font-weight:bold;"><a name="bookmark30"></a>5. &nbsp;&nbsp;&nbsp;Kesimpulan</span></h2></li></ul>
<p><span class="font4">Metode Audit Log dapat digunakan dalam mengembangkan sistem sinkronisasi database dengan memanfaatkan Apache Kafka sebagai media pengiriman pesan. Sistem sinkronisasi yang dikembangkan memiliki perfoma yang stabil dalam menangani jumlah data yang terus bertambah. Bagian yang paling penting adalah bagaimana mencatat perubahan data yang terjadi pada database menggunakan trigger dan tabel. Penggunaan trigger dan tabel dengan algoritma tertentu dapat menghasilkan informasi untuk berbagai hal yang berguna.</span></p>
<h2><a name="bookmark31"></a><span class="font4" style="font-weight:bold;"><a name="bookmark32"></a>Daftar Pustaka</span></h2>
<ul style="list-style:none;"><li>
<p><span class="font4">[1] &nbsp;&nbsp;&nbsp;G.H. Surya, I.M. Sukarsa, I.G.M.A. Sasmita. Two-Ways Database Synchronization in Homogeneous DBMS Using Audit Log Approach. </span><span class="font4" style="font-style:italic;">Journal of Theoretical and Applied Information Technology</span><span class="font4">. 2014; 65(3): 854-859.</span></p></li>
<li>
<p><span class="font4">[2] &nbsp;&nbsp;&nbsp;G.H. Surya, I.M. Sukarsa, and I.G.M.A. Sasmita. Two Ways Database Synchronization In Homogenous Binary Log. </span><span class="font4" style="font-style:italic;">Journal of Theoretical and Applied Information Technology</span><span class="font4">. 2014; 65(1): 76-82.</span></p></li>
<li>
<p><span class="font4">[3] &nbsp;&nbsp;&nbsp;Malhotra, Naveen, Chaudhary A. Implementation of Database Synchronization Technique between Client and Server. </span><span class="font4" style="font-style:italic;">International Journal of Engineering Science and Innovative Technology</span><span class="font4">. 2014; 3(4): 460–465.</span></p></li>
<li>
<p><span class="font4">[4] &nbsp;&nbsp;&nbsp;I.G.J Arissaputra, I.M. Sukarsa, P.W. Buana, N.W. Wisswani. Binary Log Design for OneWay Data Replication with ZeroMQ. </span><span class="font4" style="font-style:italic;">International Journal of Modern Education and Computer Science.</span><span class="font4"> 2018</span><span class="font4" style="font-style:italic;">;</span><span class="font4"> 10(10): 22–30.</span></p></li>
<li>
<p><span class="font4">[5] &nbsp;&nbsp;&nbsp;H. Ahmad, I.M. Sukarsa, and A.A. Ketut Agung Cahyawan Wiranatha. Pertukaran Data Antar Database Dengan Menggunakan Teknologi API. </span><span class="font4" style="font-style:italic;">Lontar Komputer: Jurnal Ilmiah Teknologi Informasi</span><span class="font4">. 2017; 8(1): 22-30.</span></p></li>
<li>
<p><span class="font4">[6] &nbsp;&nbsp;&nbsp;S. Haris. Modul Pembelajaran Praktek Basis Data (MySQL). Semarang: Universitas Dian Nuswantoro, 2012.</span></p></li>
<li>
<p><span class="font4">[7] &nbsp;&nbsp;&nbsp;K. Jay. Kafka : a Distributed Messaging System for Log Processing. 2011.</span></p></li>
<li>
<p><span class="font4">[8] &nbsp;&nbsp;&nbsp;G. Fu, Y. Zhang, G. Yu. A Fair Comparison of Message Queuing Systems. IEEE Access. 2021; 9:421-432.</span></p></li>
<li>
<p><span class="font4">[9] &nbsp;&nbsp;&nbsp;K.R Srinath. Python – The Fastest Growing Programming Language. </span><span class="font4" style="font-style:italic;">International Research Journal of Engineering and Technology.</span><span class="font4"> 2017; 4(2): 354-357.</span></p></li></ul>